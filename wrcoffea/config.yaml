# WR analysis configuration
#
# Edit this file to change physics thresholds or add new eras without
# modifying Python code.  Loaded at import time by analysis_config.py.

# Integrated luminosities (fb^-1)
lumis:
  RunIISummer20UL18: 59.83
  Run3Summer22: 7.9804
  Run3Summer22EE: 26.6717
  Run3Summer23: 17.794         # placeholder — update when 2023 lumi is finalized
  Run3Summer23BPix: 9.451      # placeholder — update when 2023 lumi is finalized
  RunIII2024Summer24: 109.08

# Default MC fileset tag per era.  Controls which DY variant is used
# when --dy is not explicitly given on the command line.
default_mc_tag:
  RunIISummer20UL18: dy_lo_ht
  Run3Summer22: dy_lo_inc
  Run3Summer22EE: dy_lo_inc
  Run3Summer23: dy_lo_inc
  Run3Summer23BPix: dy_lo_inc
  RunIII2024Summer24: dy_lo_inc

# Eras where unskimmed signal filesets are not available (no DAS entries).
# For these eras, --unskimmed signal falls back to skimmed filesets.
skimmed_only_signal:
  - RunIISummer20UL18

# Golden JSON paths for data lumi masking
lumi_jsons:
  RunIISummer20UL18: data/lumis/RunII/2018/RunIISummer20UL18/Cert_314472-325175_13TeV_Legacy2018_Collisions18_JSON.txt
  Run3Summer22: data/lumis/Run3/2022/Cert_Collisions2022_355100_362760_Golden.txt
  Run3Summer22EE: data/lumis/Run3/2022/Cert_Collisions2022_355100_362760_Golden.txt
  RunIII2024Summer24: data/lumis/Run3/2024/RunIII2024Summer24/Cert_Collisions2024_378981_386951_Golden.txt

# JSON POG payloads — JME
jme_jsons:
  RunIII2024Summer24: data/jsonpog/JME/Run3/RunIII2024Summer24/jetid.json.gz

jetveto_jsons:
  RunIISummer20UL18: data/jsonpog/JME/RunII/RunIISummer20UL18/jetvetomaps.json.gz
  RunIII2024Summer24: data/jsonpog/JME/Run3/RunIII2024Summer24/jetvetomaps.json.gz

jetveto_correction_names:
  RunIISummer20UL18: Summer19UL18_V1
  RunIII2024Summer24: Summer24Prompt24_RunBCDEFGHI_V1

# JSON POG payloads — Muon
muon_jsons:
  RunIISummer20UL18: data/jsonpog/MUO/RunII/RunIISummer20UL18/muon_HighPt.json.gz
  RunIII2024Summer24: data/jsonpog/MUO/Run3/RunIII2024Summer24/muon_HighPt.json

# JSON POG payloads — Pileup
pileup_jsons:
  RunIISummer20UL18: data/jsonpog/LUM/RunII/RunIISummer20UL18/puWeights.json.gz
  RunIII2024Summer24: data/jsonpog/LUM/Run3/RunIII2024Summer24/puWeights_BCDEFGHI.json.gz

pileup_correction_names:
  RunIISummer20UL18: Collisions18_UltraLegacy_goldenJSON
  RunIII2024Summer24: Collisions24_BCDEFGHI_goldenJSON

# JSON POG payloads — Electron
electron_jsons:
  RunIISummer20UL18:
    RECO: data/jsonpog/EGM/RunII/RunIISummer20UL18/electron.json.gz
  RunIII2024Summer24:
    RECO: data/jsonpog/EGM/Run3/RunIII2024Summer24/electron.json.gz
    TRIGGER: data/jsonpog/EGM/Run3/RunIII2024Summer24/electronHlt.json.gz

# correctionlib era key used inside EGM JSON payloads (differs from analysis era name)
electron_sf_era_keys:
  RunIISummer20UL18: "2018"
  RunIII2024Summer24: "2024Prompt"

# Per-era electron Reco SF configuration
electron_reco_config:
  RunIISummer20UL18:
    correction: UL-Electron-ID-SF
    wp_low: RecoBelow20
    wp_high: RecoAbove20
    pt_split: 20.0
  RunIII2024Summer24:
    correction: Electron-ID-SF
    wp_low: Reco20to75
    wp_high: RecoAbove75
    pt_split: 75.0

# Systematic uncertainties: integrated luminosity fractional uncertainty
lumi_unc:
  RunIISummer20UL18: 0.025     # 2.5% (UL2018)
  Run3Summer22: 0.014          # 1.4% (2022)
  Run3Summer22EE: 0.014        # 1.4% (2022EE)
  Run3Summer23: 0.014          # placeholder — update when 2023 lumi is finalized
  Run3Summer23BPix: 0.014      # placeholder — update when 2023 lumi is finalized
  RunIII2024Summer24: 0.014    # placeholder until 2024 lumi is finalized

# Physics thresholds (single source of truth for analysis cuts)
cuts:
  lepton_pt_min: 53
  lepton_eta_max: 2.4
  muon_highPtId: 2
  muon_iso_max: 0.1
  ak4_pt_min: 40
  ak4_eta_max: 2.4
  ak8_pt_min: 200
  ak8_eta_max: 2.4
  ak8_msoftdrop_min: 40
  ak8_lsf3_min: 0.75
  lead_lepton_pt_min: 60
  sublead_lepton_pt_min: 53
  mll_dy_low: 60
  mll_dy_high: 150
  mll_sr_min: 200
  mll_sr_high_min: 400
  mlljj_min: 800
  dr_min: 0.4
  dphi_boosted_min: 2.0
  dr_loose_veto: 0.01
  dr_ak8_loose: 0.8
  jet_veto_pt_min: 15
